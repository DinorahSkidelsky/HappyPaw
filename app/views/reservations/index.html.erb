<div class="container">
  <div class="d-flex justify-content-center my-5">
    <h1><strong>My Reservations:</strong></h1>
  </div>

  <table class="table">
  <thead>
    <tr>
      <th scope="col">Photo</th>
      <th scope="col">Description</th>
      <th scope="col">Sitter/Client</th>
      <th scope="col">Start Day</th>
      <th scope="col">End Day</th>
      <th scope="col">Price</th>
      <th scope="col">Confirmation</th>
      <th scope="col"></th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    <% @reservations.each do |reservation| %>
    <tr>
      <% if current_user.id == reservation.profile.user.id || reservation.user_id == current_user.id %>
      <th scope="row"><% reservation.profile.photos.each do |photo| %>
          <%= cl_image_tag photo.key, height: 150, width: 200, crop: :fill %>
        <% end %></th>
      <td><%= reservation.profile.description %></td>
      <td><%= "#{reservation.profile.user.first_name}/" "#{reservation.user.first_name}" %></td>
      <td><%= reservation.start_time.strftime('%d/%m/%Y') %></td>
      <td><%= reservation.end_time.strftime('%d/%m/%Y') %></td>
      <td><%= reservation.profile.price * ((reservation.end_time - reservation.start_time) / 86400).to_i %></td>
      <% if reservation.confirmation %>
        <td><i class="fa-solid fa-circle-check"></i></td>
      <% else %>
        <td>No Confirmation</td>
      <% end %>
      <td><%= link_to "Edit", edit_reservation_path(reservation) %></td>
      <td><a data-confirm="You sure?" title="Delete <%= reservation.id %>" rel="nofollow" data-method="DELETE" href="/reservations/<%= reservation.id %>">Delete</a></td>
      <td><%= link_to "Review", new_reservation_review_path(reservation) %></td>
    </tr>
    <% end %>
    <% end %>
  </tbody>
  </table>
</div>
</div>
